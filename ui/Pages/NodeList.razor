@page "/NodeList"
@using Extensions
@using Extensions.k8s
@using k8s.Models
@if (_nodes == null)
{
    <p>
        <em>Loading...</em>
    </p>
}
else
{
    foreach (var node in _nodes.Items)
    {
        bool isReady = node.Status.Conditions.IsReady();
        var color = isReady ? Color.Success : Color.Danger;
        <Card style="width: 18rem;" Color="color">
            <CardHeader>
                <div>
                    <p class="card-text"> @node.Metadata.Name</p>
                    @foreach (var role in node.Metadata.NodeRoles())
                    {
                        <Tag ShowBar="true" >@role</Tag>
                    }
                </div>
            </CardHeader>
            <CardBody>

                <GroupBox Title="Pod状态 ">
                    <p>
                        @_pods.CountsOfPodInNode(node.Name())
                        @foreach (var pod in _pods.PodListInNode(node.Name()))
                        {
                            <Badge Color="Color.Success" style="padding: 2px;">
                                <span style="padding: 0 2px;">
                                    <i class="fa fa-tv">
                                        @pod.Name()
                                    </i>
                                </span>
                            </Badge>
                        }

                    </p>
                </GroupBox>
            </CardBody>
            <CardFooter>
                @if (isReady)
                {
                    <Tag Icon="fa fa-check-circle" Color="Color.Success">Ready</Tag>
                }
                <Tag Color="Color.Primary">@node.Status.NodeInfo.Architecture</Tag>
                @node.Status.NodeInfo.KubeletVersion @node.Metadata.CreationTimestamp?.AgeFromUtc()
            </CardFooter>
        </Card>
    }
}
