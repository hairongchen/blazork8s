@using BlazorApp.Pages.Common.Metadata
@using BlazorApp.Pages.Event
@using BlazorApp.Pages.Pod
@using BlazorApp.Pages.Common.Html.HTable
@using BlazorApp.Pages.Common.Html
@inherits BlazorApp.Pages.Common.DrawerPageBase<k8s.Models.V1Deployment>
@if (Deployment != null)
{
    <DeploymentAction Item="Deployment" MenuMode="MenuMode.Horizontal"></DeploymentAction>
    <Divider Orientation="left" Style="font-weight:bold">Metadata</Divider>
    <MetadataView Item="Deployment.Metadata"  ExplainFieldPrefix="deployment"></MetadataView>
    <Divider Orientation="left" Style="font-weight:bold">Spec</Divider>

    <HTable Bordered Column="1" >
        <SelectorView Title="Selector" Selector="@Deployment.Spec.Selector.MatchLabels"></SelectorView>
        <SelectorView Title="Node Selector" Selector="@Deployment.Spec.Template.Spec.NodeSelector"></SelectorView>
        <ImagesView PodSpec="@Deployment.Spec.Template.Spec"></ImagesView>
        <PropertyOptionView Title="StrategyType" Item="@Deployment.Spec.Strategy.Type" ExplainField="deployment.spec.strategy" Options=@(new[] { "Recreate", "RollingUpdate" })></PropertyOptionView>
        <PropertySimpleView Title="Strategy" Item="@Deployment.Spec.Strategy" ExplainField="deployment.spec.strategy" ShowInJson="true"></PropertySimpleView>
        <PropertySimpleView Title="MinReadySeconds" Item="@Deployment.Spec.MinReadySeconds" ExplainField="deployment.spec.minReadySeconds"></PropertySimpleView>
        <PropertySimpleView Title="Paused" Item="@Deployment.Spec.Paused" ExplainField="deployment.spec.paused"></PropertySimpleView>
        <PropertySimpleView Title="ProgressDeadlineSeconds" Item="@Deployment.Spec.ProgressDeadlineSeconds" ExplainField="deployment.spec.progressDeadlineSeconds"></PropertySimpleView>
        <PropertySimpleView Title="Replicas" Item="@Deployment.Spec.Replicas" ExplainField="deployment.spec.replicas"></PropertySimpleView>
        <PropertySimpleView Title="RevisionHistoryLimit" Item="@Deployment.Spec.RevisionHistoryLimit" ExplainField="deployment.spec.revisionHistoryLimit"></PropertySimpleView>
        <TolerationsView Tolerations="@Deployment.Spec.Template.Spec.Tolerations"></TolerationsView>
    </HTable>
    <PodTemplateView PodTemplateItem="@Deployment.Spec.Template" MetadataExplainFieldPrefix="deployment"></PodTemplateView>

    <Divider Orientation="left" Style="font-weight:bold">Status</Divider>
    <HTable Bordered Column="1">
        <ConditionView ConditionList="@Deployment.Status.Conditions" ExplainField="deployment.status.conditions"></ConditionView>
        <HTableColumn Title="Replicas Sum" >
            @($"{Deployment.Spec.Replicas ?? 0} desired, {Deployment.Status.UpdatedReplicas ?? 0} updated, {Deployment.Status.Replicas ?? 0} total, {Deployment.Status.AvailableReplicas ?? 0} available, {Deployment.Status.UnavailableReplicas ?? 0} unavailable")
        </HTableColumn>
        <PropertySimpleView Title="AvailableReplicas" Item="@Deployment.Status.AvailableReplicas" ExplainField="deployment.status.availableReplicas"></PropertySimpleView>
        <PropertySimpleView Title="CollisionCount" Item="@Deployment.Status.CollisionCount" ExplainField="deployment.status.collisionCount"></PropertySimpleView>
        <PropertySimpleView Title="ObservedGeneration" Item="@Deployment.Status.ObservedGeneration" ExplainField="deployment.status.observedGeneration"></PropertySimpleView>
        <PropertySimpleView Title="ReadyReplicas" Item="@Deployment.Status.ReadyReplicas" ExplainField="deployment.status.readyReplicas"></PropertySimpleView>
        <PropertySimpleView Title="Replicas" Item="@Deployment.Status.Replicas" ExplainField="deployment.status.replicas"></PropertySimpleView>
        <PropertySimpleView Title="UnavailableReplicas" Item="@Deployment.Status.UnavailableReplicas" ExplainField="deployment.status.unavailableReplicas"></PropertySimpleView>
        <PropertySimpleView Title="UpdatedReplicas" Item="@Deployment.Status.UpdatedReplicas" ExplainField="deployment.status.updatedReplicas"></PropertySimpleView>
    </HTable>



    <MiniReplicaSetListView ControllerByUid="@Deployment.Metadata.Uid"></MiniReplicaSetListView>
    <MiniPodListView Pods="@PodList"></MiniPodListView>
    <MiniEventListView Uid="@Deployment.Metadata.Uid"></MiniEventListView>
}
