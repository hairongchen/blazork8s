@using Extension.k8s
@using k8s.Models
@using BlazorApp.Pages.Common.Metadata
@using BlazorApp.Pages.Container
@using BlazorApp.Pages.Event
@using BlazorApp.Utils
@inherits BlazorApp.Pages.Common.DrawerPageBase<k8s.Models.V1Pod>
@if (Item != null)
{
    <PodAction PodItem="Item" MenuMode="MenuMode.Horizontal"></PodAction>
    <Divider Orientation="left" Style="font-weight:bold">Metadata</Divider>
    <MetadataView Item="Item" T="V1Pod"></MetadataView>
    <Divider Orientation="left" Style="font-weight:bold">Spec</Divider>
    <Descriptions Bordered Column="1">

        @if (Item.Spec.HostAliases != null)
        {
            <DescriptionsItem Title="HostAliases">
                @foreach (var alias in Item.Spec.HostAliases)
                {
                    @foreach (var hostname in alias.Hostnames)
                    {
                        <div>
                            <Tag Color=@RandomColorHelper.RandomColor()>@($"{alias.Ip} {hostname}")</Tag>
                        </div>
                    }
                }
                <KubectlExplainButton Field="pod.spec.hostAliases"></KubectlExplainButton>
            </DescriptionsItem>
        }
        <PropertySimpleView Title="ActiveDeadlineSeconds" ExplainField="pod.spec.activeDeadlineSeconds" Item="@Item.Spec.ActiveDeadlineSeconds"></PropertySimpleView>
        <PropertySimpleView Title="Affinity" ExplainField="pod.spec.affinity" Item="@Item.Spec.Affinity" ShowInJson="true"></PropertySimpleView>
        <PropertySimpleView Title="EnableServiceLinks" ExplainField="pod.spec.enableServiceLinks" Item="@Item.Spec.EnableServiceLinks"></PropertySimpleView>
        <PropertySimpleView Title="DnsConfig" ExplainField="pod.spec.dnsConfig" Item="@Item.Spec.DnsConfig" ShowInJson="true"></PropertySimpleView>
        <PropertyOptionView Title="DnsPolicy" Item="@Item.Spec.DnsPolicy" Options='@(new[] { "Default", "ClusterFirst", "ClusterFirstWithHostNet", "None" })' ExplainField="pod.spec.dnsPolicy"></PropertyOptionView>
        <PropertyOptionView Title="RestartPolicy" Item="@Item.Spec.RestartPolicy" Options='@(new[] { "Always", "Never", "OnFailure" })' ExplainField="pod.spec.restartPolicy"></PropertyOptionView>
        <PropertySimpleView Title="AutomountServiceAccountToken" ExplainField="pod.spec.automountServiceAccountToken" Item="@Item.Spec.AutomountServiceAccountToken"></PropertySimpleView>
        <PropertySimpleView Title="HostIPC" ExplainField="pod.spec.hostIPC" Item="@Item.Spec.HostIPC"></PropertySimpleView>
        <PropertySimpleView Title="HostNetwork" ExplainField="pod.spec.hostNetwork" Item="@Item.Spec.HostNetwork"></PropertySimpleView>
        <PropertySimpleView Title="HostPID" ExplainField="pod.spec.hostPID" Item="@Item.Spec.HostPID"></PropertySimpleView>
        <PropertySimpleView Title="HostUsers" ExplainField="pod.spec.hostUsers" Item="@Item.Spec.HostUsers"></PropertySimpleView>
        <PropertySimpleView Title="Hostname" ExplainField="pod.spec.hostname" Item="@Item.Spec.Hostname"></PropertySimpleView>
        <PropertySimpleView Title="Subdomain" ExplainField="pod.spec.subdomain" Item="@Item.Spec.Subdomain"></PropertySimpleView>
        <PropertySimpleGenericsView Title="Os" ExplainField="pod.spec.os" Item="@Item.Spec.Os" Key="Name" T="V1PodOS"></PropertySimpleGenericsView>
        <PropertySimpleView Title="NodeName" ExplainField="pod.spec.nodeName" Item="@Item.Spec.NodeName" OnClick="@(() => OnNodeNameClick(Item.Spec.NodeName))"></PropertySimpleView>
        <PropertySimpleView Title="SchedulerName" Item="@Item.Spec.SchedulerName" ExplainField="pod.spec.schedulerName"></PropertySimpleView>
        <PropertyListView Title="SchedulingGates" Items="@Item.Spec.SchedulingGates" Key="Name" ExplainField="pod.spec.schedulingGates" T="V1PodSchedulingGate"></PropertyListView>
        <PropertySimpleView Title="RuntimeClassName" Item="@Item.Spec.RuntimeClassName" ExplainField="pod.spec.runtimeClassName"></PropertySimpleView>
        <PropertySimpleView Title="PriorityClass" Item="@Item.Spec.PriorityClassName" ExplainField="pod.spec.priorityClassName"></PropertySimpleView>
        <PropertySimpleView Title="Priority" Item="@Item.Spec.Priority" ExplainField="pod.spec.priority"></PropertySimpleView>
        <PropertyListView Title="ImagePullSecrets" Items="@Item.Spec.ImagePullSecrets" Key="Name" ExplainField="pod.spec.imagePullSecrets" T="V1LocalObjectReference"></PropertyListView>
        <PropertyOptionView Title="PreemptionPolicy" ExplainField="pod.spec.preemptionPolicy" Item="@Item.Spec.PreemptionPolicy" Options='@(new[] { "Never", "PreemptLowerPriority" })'></PropertyOptionView>
        <PropertySimpleView Title="Overhead" Item="@Item.Spec.Overhead" ExplainField="pod.spec.overhead" ShowInJson="true"></PropertySimpleView>
        <PropertySimpleView Title="ResourceClaims" Item="@Item.Spec.ResourceClaims" ExplainField="pod.spec.resourceClaims" ShowInJson="true"></PropertySimpleView>
        <PropertySimpleView Title="securityContext" Item="@Item.Spec.SecurityContext" ExplainField="pod.spec.securityContext" ShowInJson="true"></PropertySimpleView>
        <PropertyListView Title="ReadinessGates" ExplainField="pod.spec.readinessGates" Items="@Item.Spec.ReadinessGates" Key="ConditionType" T="V1PodReadinessGate"></PropertyListView>
        <PropertySimpleView Title="ServiceAccount" ExplainField="pod.spec.serviceAccount" Item="@Item.Spec.ServiceAccount"></PropertySimpleView>
        <PropertySimpleView Title="ServiceAccountName" ExplainField="pod.spec.serviceAccountName" Item="@Item.Spec.ServiceAccountName"></PropertySimpleView>
        <PropertySimpleView Title="SetHostnameAsFQDN" ExplainField="pod.spec.setHostnameAsFQDN" Item="@Item.Spec.SetHostnameAsFQDN"></PropertySimpleView>
        <PropertySimpleView Title="ShareProcessNamespace" ExplainField="pod.spec.shareProcessNamespace" Item="@Item.Spec.ShareProcessNamespace"></PropertySimpleView>
        <PropertySimpleView Title="TerminationGracePeriodSeconds" ExplainField="pod.spec.terminationGracePeriodSeconds" Item="@Item.Spec.TerminationGracePeriodSeconds"></PropertySimpleView>
        <PropertySimpleView Title="TopologySpreadConstraints" ExplainField="pod.spec.topologySpreadConstraints" Item="@Item.Spec.TopologySpreadConstraints"></PropertySimpleView>

        <SelectorView Title="NodeSelector" Selector="@Item.Spec.NodeSelector"></SelectorView>
        <ImagesView PodSpec="@Item.Spec"></ImagesView>
        <TolerationsView Tolerations="@Item.Spec.Tolerations"></TolerationsView>
    </Descriptions>


    <Divider Orientation="left" Style="font-weight:bold">Status</Divider>
    <Descriptions Bordered Column="1">
        <DescriptionsItem Title="Status">
            <StatusView Status=@Item.Status()></StatusView>
            @if (Item.Status.Reason != null)
            {
                <Tag Color=@RandomColorHelper.RandomColor()>@Item.Status.Reason</Tag>
            }
            @if (Item.Status.Message != null)
            {
                <div>
                    <Text Copyable> @Item.Status.Message</Text>
                </div>
            }
        </DescriptionsItem>
        <DescriptionsItem Title="StartTime">
            <AgeView Age="@Item.Status.StartTime"></AgeView>
            (@Item.Status.StartTime.GetValueOrDefault().ToLocalTime())
        </DescriptionsItem>
        <PropertyOptionView Title="Phase" ExplainField="pod.spec.phase" Item="@Item.Status.Phase" Options='@(new[] { "Failed", "Pending", "Running", "Succeeded", "Unknown" })'></PropertyOptionView>
        <PodConditionView Conditions="@Item.Status.Conditions"></PodConditionView>
        <PropertySimpleView Title="Resize" ExplainField="pod.status.resize" Item="@Item.Status.Resize"></PropertySimpleView>
        <PropertySimpleView Title="HostIP" ExplainField="pod.status.hostIP" Item="@Item.Status.HostIP"></PropertySimpleView>
        <PropertyListView Title="HostIPs" ExplainField="pod.status.hostIPs" Key="Ip" Items="@Item.Status.HostIPs" T="V1HostIP"></PropertyListView>
        <PropertySimpleView Title="PodIP" ExplainField="pod.status.podIP" Item="@Item.Status.PodIP"></PropertySimpleView>
        <PropertyListView Title="PodIPs" ExplainField="pod.status.podIPs" Key="Ip" Items="@Item.Status.PodIPs" T="V1PodIP"></PropertyListView>
        <PropertySimpleView Title="NominatedNodeName" Item="@Item.Status.NominatedNodeName" ExplainField="pod.status.nominatedNodeName"></PropertySimpleView>
        <PropertyOptionView Title="QosClass" ExplainField="pod.status.qosClass" Item="@Item.Status.QosClass" Options='@(new[] { "BestEffort", "Burstable", "Guaranteed" })'></PropertyOptionView>

    </Descriptions>


    <ContainerListView Pod="@Item"></ContainerListView>


    <VolumeView PodItem="@Item"></VolumeView>


    <MiniEventListView Uid="@Item.Metadata.Uid"></MiniEventListView>
}
