@using Extension
@using BlazorApp.Pages.Common.Html.HTable
@using BlazorApp.Pages.Common.Metadata
@using BlazorApp.Pages.Common.Html
<Divider Orientation="left" Style="font-weight:bold">Events</Divider>
@if (Events != null)
{
    foreach (var xx in Events)
    {
        <HTable Bordered Column="1">

            <HTableColumn Title="Message">
                @if (xx.Type == "Warning")
                {
                    <Text Type="danger" Strong="true">@xx.Message</Text>
                }
                else
                {
                    @xx.Message
                }
                <Badge Count="@xx.Count"></Badge>
            </HTableColumn>
            @if (xx.Source != null)
            {
                <HTableColumn Title="Source">
                    <Tag >@xx.Source.Host</Tag>
                    <Tag >@xx.Source.Component</Tag>
                </HTableColumn>
            }
            @if (xx.LastTimestamp != null)
            {
                <HTableColumn Title="LastSeen">
                    <AgeView Age="@xx.LastTimestamp"></AgeView>
                    ( @xx.LastTimestamp.GetValueOrDefault().ToLocalTime() )
                </HTableColumn>
            }
            @if (xx.InvolvedObject != null)
            {
                <HTableColumn Title="Involved">
                    <Tag PresetColor="PresetColor.Blue">@xx.InvolvedObject.NamespaceProperty</Tag>
                    <Tag PresetColor="PresetColor.Purple">@xx.InvolvedObject.Kind</Tag>
                    <Tag PresetColor="PresetColor.Orange">@xx.InvolvedObject.Name</Tag>
                    <Tag PresetColor="PresetColor.Green">@xx.InvolvedObject.FieldPath</Tag>
                </HTableColumn>
            }
        </HTable>
    }

    if (!String.IsNullOrEmpty(Advice))
    {
        <Card Title="智能诊断">
            <Body>
            @((MarkupString)Advice.ToHtmlDisplay())
            </Body>
        </Card>
    }
}
