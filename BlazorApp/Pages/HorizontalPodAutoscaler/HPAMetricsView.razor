@using k8s.Models
@using BlazorApp.Pages.Common.Html.HTable
@using BlazorApp.Pages.Common.Metadata
@if (Hpa != null)
{
    <Divider Orientation="left" Style="font-weight:bold">Metrics</Divider>
    @if (Hpa.Spec.Metrics is { Count: > 0 })
    {
        @foreach (var metric in Hpa.Spec.Metrics)
        {
            <HTable Bordered Column="1">
                <PropertyOptionView Title="Type" ExplainField="horizontalPodAutoscaler.spec.metrics.type" Item="@metric.Type" Options='@(new[] { "ContainerResource", "External", "Object", "Pods", "Resource" })'></PropertyOptionView>

                @if (metric.Pods != null)
                {
                    <PropertySimpleView Title="Pods" ExplainField="horizontalPodAutoscaler.spec.metrics.pods" Item="@metric.Pods" ShowInJson="true">
                        <HPAMetricsDetailView Metric="@metric"></HPAMetricsDetailView>
                    </PropertySimpleView>
                }
                @if (metric.Resource != null)
                {
                    <PropertySimpleView Title="Resource" ExplainField="horizontalPodAutoscaler.spec.metrics.resource" Item="@metric.Resource" ShowInJson="true">
                        <HPAMetricsDetailView Metric="@metric"></HPAMetricsDetailView>
                    </PropertySimpleView>
                }
                @if (metric.ObjectProperty != null)
                {
                    <PropertySimpleView Title="Object" ExplainField="horizontalPodAutoscaler.spec.metrics.object" Item="@metric.ObjectProperty" ShowInJson="true">
                        <HPAMetricsDetailView Metric="@metric" Namespace="@Hpa.Namespace()"></HPAMetricsDetailView>
                    </PropertySimpleView>
                }
                @if (metric.External != null)
                {
                    <PropertySimpleView Title="External" ExplainField="horizontalPodAutoscaler.spec.metrics.external" Item="@metric.External" ShowInJson="true">
                        <HPAMetricsDetailView Metric="@metric"></HPAMetricsDetailView>
                    </PropertySimpleView>
                }
                @if (metric.ContainerResource != null)
                {
                    <PropertySimpleView Title="ContainerResource" ExplainField="horizontalPodAutoscaler.spec.metrics.containerResource" Item="@metric.ContainerResource" ShowInJson="true">
                        <HPAMetricsDetailView Metric="@metric"></HPAMetricsDetailView>
                    </PropertySimpleView>
                }
            </HTable>
        }
    }
}


@code {

    [Parameter]
    public V2HorizontalPodAutoscaler Hpa { get; set; }

}
