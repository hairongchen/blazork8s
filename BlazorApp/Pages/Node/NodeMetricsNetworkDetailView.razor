@using BlazorApp.Pages.Cluster
@using BlazorApp.Service.k8s
@using BlazorApp.Utils.Prometheus.Models.Interfaces
@using k8s.Models
@inherits BlazorApp.Pages.Common.DrawerPageBase<V1Node>
<MetricsCounterGaugeSumView AllMetrics="@CAdvisorMetrics" Title=@L["container_network_receive_bytes_total"]
                            MetricName="container_network_receive_bytes_total"
                            Unit="bytes">
</MetricsCounterGaugeSumView>
<MetricsCounterGaugeSumView AllMetrics="@CAdvisorMetrics" Title=@L["container_network_receive_errors_total"]
                            MetricName="container_network_receive_errors_total">
</MetricsCounterGaugeSumView>
<MetricsCounterGaugeSumView AllMetrics="@CAdvisorMetrics"
                            Title=@L["container_network_receive_packets_dropped_total"]
                            MetricName="container_network_receive_packets_dropped_total">
</MetricsCounterGaugeSumView>
<MetricsCounterGaugeSumView AllMetrics="@CAdvisorMetrics" Title=@L["container_network_receive_packets_total"]
                            MetricName="container_network_receive_packets_total">
</MetricsCounterGaugeSumView>
<MetricsCounterGaugeSumView AllMetrics="@CAdvisorMetrics" Title=@L["container_network_transmit_bytes_total"]
                            MetricName="container_network_transmit_bytes_total"
                            Unit="bytes">
</MetricsCounterGaugeSumView>
<MetricsCounterGaugeSumView AllMetrics="@CAdvisorMetrics" Title=@L["container_network_transmit_errors_total"]
                            MetricName="container_network_transmit_errors_total">
</MetricsCounterGaugeSumView>
<MetricsCounterGaugeSumView AllMetrics="@CAdvisorMetrics"
                            Title=@L["container_network_transmit_packets_dropped_total"]
                            MetricName="container_network_transmit_packets_dropped_total">
</MetricsCounterGaugeSumView>
<MetricsCounterGaugeSumView AllMetrics="@CAdvisorMetrics" Title=@L["container_network_transmit_packets_total"]
                            MetricName="container_network_transmit_packets_total">
</MetricsCounterGaugeSumView>

@code {
    [Parameter] public V1Node Node { get; set; }

    [Inject] INodeService NodeService { get; set; }
    private IList<IMetric> Metrics { get; set; }
    private IList<IMetric> CAdvisorMetrics { get; set; }
    private IList<IMetric> ResourceMetrics { get; set; }

    protected override async Task OnInitializedAsync()
    {
        Node = Options;
        Metrics = await NodeService.GetMetrics(Node.Name());
        CAdvisorMetrics = await NodeService.GetCadvisorMetrics(Node.Name());
        ResourceMetrics = await NodeService.GetResourceMetrics(Node.Name());

        await base.OnInitializedAsync();
    }


}
