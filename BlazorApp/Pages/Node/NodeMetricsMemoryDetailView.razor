@using BlazorApp.Pages.Cluster
@using BlazorApp.Service.k8s
@using BlazorApp.Utils.Prometheus.Models.Interfaces
@using k8s.Models
@inherits BlazorApp.Pages.Common.DrawerPageBase<V1Node>
<MetricsCounterGaugeSumView AllMetrics="@CAdvisorMetrics" Title=@L["machine_memory_bytes"]
                            MetricName="machine_memory_bytes" Unit="bytes">
</MetricsCounterGaugeSumView>
<MetricsCounterGaugeSumView AllMetrics="@CAdvisorMetrics" Title=@L["container_memory_cache"]
                            MetricName="container_memory_cache" Unit="bytes">
</MetricsCounterGaugeSumView>
<MetricsCounterGaugeSumView AllMetrics="@CAdvisorMetrics" Title=@L["container_memory_failcnt"]
                            MetricName="container_memory_failcnt">
</MetricsCounterGaugeSumView>
<MetricsCounterGaugeSumView AllMetrics="@CAdvisorMetrics" Title=@L["container_memory_failures_total"]
                            MetricName="container_memory_failures_total">
</MetricsCounterGaugeSumView>
<MetricsCounterGaugeSumView AllMetrics="@CAdvisorMetrics" Title=@L["container_memory_mapped_file"]
                            MetricName="container_memory_mapped_file">
</MetricsCounterGaugeSumView>
<MetricsCounterGaugeSumView AllMetrics="@CAdvisorMetrics" Title=@L["container_memory_max_usage_bytes"]
                            MetricName="container_memory_max_usage_bytes"
                            Unit="bytes">
</MetricsCounterGaugeSumView>
<MetricsCounterGaugeSumView AllMetrics="@CAdvisorMetrics" Title=@L["container_memory_rss"]
                            MetricName="container_memory_rss" Unit="bytes">
</MetricsCounterGaugeSumView>
<MetricsCounterGaugeSumView AllMetrics="@CAdvisorMetrics" Title=@L["container_memory_swap"]
                            MetricName="container_memory_swap" Unit="bytes">
</MetricsCounterGaugeSumView>
<MetricsCounterGaugeSumView AllMetrics="@CAdvisorMetrics" Title=@L["container_memory_usage_bytes"]
                            MetricName="container_memory_usage_bytes"
                            Unit="bytes">
</MetricsCounterGaugeSumView>
<MetricsCounterGaugeSumView AllMetrics="@CAdvisorMetrics" Title=@L["container_memory_working_set_bytes"]
                            MetricName="container_memory_working_set_bytes"
                            Unit="bytes">
</MetricsCounterGaugeSumView>


@code {
    [Parameter] public V1Node Node { get; set; }

    [Inject] INodeService NodeService { get; set; }
    private IList<IMetric> Metrics { get; set; }
    private IList<IMetric> CAdvisorMetrics { get; set; }
    private IList<IMetric> ResourceMetrics { get; set; }

    protected override async Task OnInitializedAsync()
    {
        Node = Options;
        Metrics = await NodeService.GetMetrics(Node.Name());
        CAdvisorMetrics = await NodeService.GetCadvisorMetrics(Node.Name());
        ResourceMetrics = await NodeService.GetResourceMetrics(Node.Name());

        await base.OnInitializedAsync();
    }


}
