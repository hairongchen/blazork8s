@using BlazorApp.Pages.Cluster
@using BlazorApp.Pages.Common.Html.HTable
@using BlazorApp.Service.k8s
@using BlazorApp.Utils.Prometheus.Models.Interfaces
@using k8s.Models
@inherits BlazorApp.Pages.Common.DrawerPageBase<V1Node>

<HTable>
<HTr>
    <HTd>@L["CPU"]</HTd>
    <HTd>
        <MetricsCounterGaugeSumView AllMetrics="@AllMetrics" Title=@L["machine_cpu_sockets"]
                                    MetricName="machine_cpu_sockets">
        </MetricsCounterGaugeSumView>
        <MetricsCounterGaugeSumView AllMetrics="@AllMetrics" Title=@L["machine_cpu_physical_cores"]
                                    MetricName="machine_cpu_physical_cores">
        </MetricsCounterGaugeSumView>
        <MetricsCounterGaugeSumView AllMetrics="@AllMetrics" Title=@L["machine_cpu_cores"]
                                    MetricName="machine_cpu_cores">
        </MetricsCounterGaugeSumView>
        <MetricsCounterGaugeSumView AllMetrics="@AllMetrics" Title=@L["container_cpu_load_average_10s"]
                                    MetricName="container_cpu_load_average_10s">
        </MetricsCounterGaugeSumView>
        <MetricsCounterGaugeSumView AllMetrics="@AllMetrics" Title=@L["container_cpu_system_seconds_total"]
                                    MetricName="container_cpu_system_seconds_total"
                                    Unit="seconds">
        </MetricsCounterGaugeSumView>
        <MetricsCounterGaugeSumView AllMetrics="@AllMetrics" Title=@L["container_cpu_usage_seconds_total"]
                                    MetricName="container_cpu_usage_seconds_total"
                                    Unit="seconds">
        </MetricsCounterGaugeSumView>
        <MetricsCounterGaugeSumView AllMetrics="@AllMetrics" Title=@L["container_cpu_user_seconds_total"]
                                    MetricName="container_cpu_user_seconds_total"
                                    Unit="seconds">
        </MetricsCounterGaugeSumView>
        <MetricsCounterGaugeSumView AllMetrics="@AllMetrics" Title=@L["machine_scrape_error"]
                                    MetricName="machine_scrape_error">
        </MetricsCounterGaugeSumView>
    </HTd>
</HTr>
<HTr>
    <HTd>@L["Memory"]</HTd>
    <HTd>
        <MetricsCounterGaugeSumView AllMetrics="@AllMetrics" Title=@L["machine_memory_bytes"]
                                    MetricName="machine_memory_bytes" Unit="bytes">
        </MetricsCounterGaugeSumView>
        <MetricsCounterGaugeSumView AllMetrics="@AllMetrics" Title=@L["container_memory_cache"]
                                    MetricName="container_memory_cache" Unit="bytes">
        </MetricsCounterGaugeSumView>
        <MetricsCounterGaugeSumView AllMetrics="@AllMetrics" Title=@L["container_memory_failcnt"]
                                    MetricName="container_memory_failcnt">
        </MetricsCounterGaugeSumView>
        <MetricsCounterGaugeSumView AllMetrics="@AllMetrics" Title=@L["container_memory_failures_total"]
                                    MetricName="container_memory_failures_total">
        </MetricsCounterGaugeSumView>
        <MetricsCounterGaugeSumView AllMetrics="@AllMetrics" Title=@L["container_memory_mapped_file"]
                                    MetricName="container_memory_mapped_file">
        </MetricsCounterGaugeSumView>
        <MetricsCounterGaugeSumView AllMetrics="@AllMetrics" Title=@L["container_memory_max_usage_bytes"]
                                    MetricName="container_memory_max_usage_bytes"
                                    Unit="bytes">
        </MetricsCounterGaugeSumView>
        <MetricsCounterGaugeSumView AllMetrics="@AllMetrics" Title=@L["container_memory_rss"]
                                    MetricName="container_memory_rss" Unit="bytes">
        </MetricsCounterGaugeSumView>
        <MetricsCounterGaugeSumView AllMetrics="@AllMetrics" Title=@L["container_memory_swap"]
                                    MetricName="container_memory_swap" Unit="bytes">
        </MetricsCounterGaugeSumView>
        <MetricsCounterGaugeSumView AllMetrics="@AllMetrics" Title=@L["container_memory_usage_bytes"]
                                    MetricName="container_memory_usage_bytes"
                                    Unit="bytes">
        </MetricsCounterGaugeSumView>
        <MetricsCounterGaugeSumView AllMetrics="@AllMetrics" Title=@L["container_memory_working_set_bytes"]
                                    MetricName="container_memory_working_set_bytes"
                                    Unit="bytes">
        </MetricsCounterGaugeSumView>

    </HTd>
</HTr>
<HTr>
    <HTd>@L["Disk"]</HTd>
    <HTd>
        <MetricsCounterGaugeSumView AllMetrics="@AllMetrics" Title=@L["machine_nvm_capacity"]
                                    MetricName="machine_nvm_capacity" Unit="bytes">
        </MetricsCounterGaugeSumView>
        <MetricsCounterGaugeSumView AllMetrics="@AllMetrics" Title=@L["machine_nvm_avg_power_budget_watts"]
                                    MetricName="machine_nvm_avg_power_budget_watts">
        </MetricsCounterGaugeSumView>
        <MetricsCounterGaugeSumView AllMetrics="@AllMetrics" Title=@L["container_blkio_device_usage_total"]
                                    MetricName="container_blkio_device_usage_total"
                                    Unit="bytes">
        </MetricsCounterGaugeSumView>
        <MetricsCounterGaugeSumView AllMetrics="@AllMetrics" Title=@L["container_file_descriptors"]
                                    MetricName="container_file_descriptors">
        </MetricsCounterGaugeSumView>
        <MetricsCounterGaugeSumView AllMetrics="@AllMetrics" Title=@L["container_fs_inodes_free"]
                                    MetricName="container_fs_inodes_free">
        </MetricsCounterGaugeSumView>
        <MetricsCounterGaugeSumView AllMetrics="@AllMetrics" Title=@L["container_fs_inodes_total"]
                                    MetricName="container_fs_inodes_total">
        </MetricsCounterGaugeSumView>
        <MetricsCounterGaugeSumView AllMetrics="@AllMetrics" Title=@L["container_fs_io_current"]
                                    MetricName="container_fs_io_current">
        </MetricsCounterGaugeSumView>
        <MetricsCounterGaugeSumView AllMetrics="@AllMetrics" Title=@L["container_fs_io_time_seconds_total"]
                                    MetricName="container_fs_io_time_seconds_total"
                                    Unit="seconds">
        </MetricsCounterGaugeSumView>
        <MetricsCounterGaugeSumView AllMetrics="@AllMetrics" Title=@L["container_fs_io_time_weighted_seconds_total"]
                                    MetricName="container_fs_io_time_weighted_seconds_total"
                                    Unit="seconds">
        </MetricsCounterGaugeSumView>
        <MetricsCounterGaugeSumView AllMetrics="@AllMetrics" Title=@L["container_fs_limit_bytes"]
                                    MetricName="container_fs_limit_bytes" Unit="bytes">
        </MetricsCounterGaugeSumView>
        <MetricsCounterGaugeSumView AllMetrics="@AllMetrics" Title=@L["container_fs_read_seconds_total"]
                                    MetricName="container_fs_read_seconds_total"
                                    Unit="seconds">
        </MetricsCounterGaugeSumView>
        <MetricsCounterGaugeSumView AllMetrics="@AllMetrics" Title=@L["container_fs_reads_bytes_total"]
                                    MetricName="container_fs_reads_bytes_total"
                                    Unit="bytes">
        </MetricsCounterGaugeSumView>
        <MetricsCounterGaugeSumView AllMetrics="@AllMetrics" Title=@L["container_fs_reads_merged_total"]
                                    MetricName="container_fs_reads_merged_total">
        </MetricsCounterGaugeSumView>
        <MetricsCounterGaugeSumView AllMetrics="@AllMetrics" Title=@L["container_fs_reads_total"]
                                    MetricName="container_fs_reads_total">
        </MetricsCounterGaugeSumView>
        <MetricsCounterGaugeSumView AllMetrics="@AllMetrics" Title=@L["container_fs_sector_reads_total"]
                                    MetricName="container_fs_sector_reads_total">
        </MetricsCounterGaugeSumView>
        <MetricsCounterGaugeSumView AllMetrics="@AllMetrics" Title=@L["container_fs_sector_writes_total"]
                                    MetricName="container_fs_sector_writes_total">
        </MetricsCounterGaugeSumView>
        <MetricsCounterGaugeSumView AllMetrics="@AllMetrics" Title=@L["container_fs_usage_bytes"]
                                    MetricName="container_fs_usage_bytes" Unit="bytes">
        </MetricsCounterGaugeSumView>
        <MetricsCounterGaugeSumView AllMetrics="@AllMetrics" Title=@L["container_fs_write_seconds_total"]
                                    MetricName="container_fs_write_seconds_total"
                                    Unit="seconds">
        </MetricsCounterGaugeSumView>
        <MetricsCounterGaugeSumView AllMetrics="@AllMetrics" Title=@L["container_fs_writes_bytes_total"]
                                    MetricName="container_fs_writes_bytes_total"
                                    Unit="bytes">
        </MetricsCounterGaugeSumView>
        <MetricsCounterGaugeSumView AllMetrics="@AllMetrics" Title=@L["container_fs_writes_merged_total"]
                                    MetricName="container_fs_writes_merged_total">
        </MetricsCounterGaugeSumView>
        <MetricsCounterGaugeSumView AllMetrics="@AllMetrics" Title=@L["container_fs_writes_total"]
                                    MetricName="container_fs_writes_total"
                                    Unit="bytes">
        </MetricsCounterGaugeSumView>

    </HTd>
</HTr>
<HTr>
    <HTd>@L["Process"]</HTd>
    <HTd>
        <MetricsCounterGaugeSumView AllMetrics="@AllMetrics" Title=@L["container_ulimits_soft"]
                                    MetricName="container_ulimits_soft">
        </MetricsCounterGaugeSumView>
        <MetricsCounterGaugeSumView AllMetrics="@AllMetrics" Title=@L["container_oom_events_total"]
                                    MetricName="container_oom_events_total">
        </MetricsCounterGaugeSumView>
        <MetricsCounterGaugeSumView AllMetrics="@AllMetrics" Title=@L["container_processes"]
                                    MetricName="container_processes">
        </MetricsCounterGaugeSumView>
        <MetricsCounterGaugeSumView AllMetrics="@AllMetrics" Title=@L["container_scrape_error"]
                                    MetricName="container_scrape_error">
        </MetricsCounterGaugeSumView>
        <MetricsCounterGaugeSumView AllMetrics="@AllMetrics" Title=@L["container_sockets"]
                                    MetricName="container_sockets">
        </MetricsCounterGaugeSumView>
        <MetricsCounterGaugeSumView AllMetrics="@AllMetrics" Title=@L["container_spec_cpu_period"]
                                    MetricName="container_spec_cpu_period">
        </MetricsCounterGaugeSumView>
        <MetricsCounterGaugeSumView AllMetrics="@AllMetrics" Title=@L["container_spec_cpu_quota"]
                                    MetricName="container_spec_cpu_quota">
        </MetricsCounterGaugeSumView>
        <MetricsCounterGaugeSumView AllMetrics="@AllMetrics" Title=@L["container_spec_cpu_shares"]
                                    MetricName="container_spec_cpu_shares">
        </MetricsCounterGaugeSumView>
        <MetricsCounterGaugeSumView AllMetrics="@AllMetrics" Title=@L["container_spec_memory_limit_bytes"]
                                    MetricName="container_spec_memory_limit_bytes"
                                    Unit="bytes">
        </MetricsCounterGaugeSumView>
        <MetricsCounterGaugeSumView AllMetrics="@AllMetrics"
                                    Title=@L["container_spec_memory_reservation_limit_bytes"]
                                    MetricName="container_spec_memory_reservation_limit_bytes"
                                    Unit="bytes">
        </MetricsCounterGaugeSumView>
        <MetricsCounterGaugeSumView AllMetrics="@AllMetrics" Title=@L["container_spec_memory_swap_limit_bytes"]
                                    MetricName="container_spec_memory_swap_limit_bytes"
                                    Unit="bytes">
        </MetricsCounterGaugeSumView>
        <MetricsCounterGaugeSumView AllMetrics="@AllMetrics" Title=@L["container_tasks_state"]
                                    MetricName="container_tasks_state">
        </MetricsCounterGaugeSumView>
        <MetricsCounterGaugeSumView AllMetrics="@AllMetrics" Title=@L["container_threads"]
                                    MetricName="container_threads">
        </MetricsCounterGaugeSumView>
        <MetricsCounterGaugeSumView AllMetrics="@AllMetrics" Title=@L["container_threads_max"]
                                    MetricName="container_threads_max">
        </MetricsCounterGaugeSumView>

    </HTd>
</HTr>
<HTr>
    <HTd>@L["Network"]</HTd>
    <HTd>
        <MetricsCounterGaugeSumView AllMetrics="@AllMetrics" Title=@L["container_network_receive_bytes_total"]
                                    MetricName="container_network_receive_bytes_total"
                                    Unit="bytes">
        </MetricsCounterGaugeSumView>
        <MetricsCounterGaugeSumView AllMetrics="@AllMetrics" Title=@L["container_network_receive_errors_total"]
                                    MetricName="container_network_receive_errors_total">
        </MetricsCounterGaugeSumView>
        <MetricsCounterGaugeSumView AllMetrics="@AllMetrics"
                                    Title=@L["container_network_receive_packets_dropped_total"]
                                    MetricName="container_network_receive_packets_dropped_total">
        </MetricsCounterGaugeSumView>
        <MetricsCounterGaugeSumView AllMetrics="@AllMetrics" Title=@L["container_network_receive_packets_total"]
                                    MetricName="container_network_receive_packets_total">
        </MetricsCounterGaugeSumView>
        <MetricsCounterGaugeSumView AllMetrics="@AllMetrics" Title=@L["container_network_transmit_bytes_total"]
                                    MetricName="container_network_transmit_bytes_total"
                                    Unit="bytes">
        </MetricsCounterGaugeSumView>
        <MetricsCounterGaugeSumView AllMetrics="@AllMetrics" Title=@L["container_network_transmit_errors_total"]
                                    MetricName="container_network_transmit_errors_total">
        </MetricsCounterGaugeSumView>
        <MetricsCounterGaugeSumView AllMetrics="@AllMetrics"
                                    Title=@L["container_network_transmit_packets_dropped_total"]
                                    MetricName="container_network_transmit_packets_dropped_total">
        </MetricsCounterGaugeSumView>
        <MetricsCounterGaugeSumView AllMetrics="@AllMetrics" Title=@L["container_network_transmit_packets_total"]
                                    MetricName="container_network_transmit_packets_total">
        </MetricsCounterGaugeSumView>
    </HTd>
</HTr>
</HTable>


@code {
    [Parameter] public V1Node Node { get; set; }

    [Inject] INodeService NodeService { get; set; }

    private IList<IMetric> AllMetrics { get; set; }

    protected override async Task OnInitializedAsync()
    {
        Node = Options;
        AllMetrics = await NodeService.GetCadvisorMetrics(Node.Name());
        await base.OnInitializedAsync();
    }


}
