@using k8s.Models
@using BlazorApp.Pages.Common.Html
@using BlazorApp.Pages.Common.Html.HTable
@using BlazorApp.Pages.Common.Metadata
@using BlazorApp.Pages.Common
@if (Rules is { Count: > 0 })
{
    <HTableColumn Title="@Title">
        @foreach (var rule in Rules)
        {
            <HTable Class="miniTable">
                <HTr>
                    <HTd>Host</HTd>
                    <HTd>
                        <ColorfulTag>@(rule.Host ?? "*") </ColorfulTag>
                        <KubectlExplainButton Field="ingress.spec.rules.host"></KubectlExplainButton>
                    </HTd>
                </HTr>


                @if (rule.Http.Paths is { Count: > 0 })
                {
                    @foreach (var path in rule.Http.Paths)
                    {
                        <HTableColumn Title="Path">
                            <ColorfulTag>@($"[{path.PathType}] {path.Path}")</ColorfulTag>
                            ==>
                            <IngressBackendNoTableView Backend="@path.Backend"></IngressBackendNoTableView>
                        </HTableColumn>
                    }
                }

            </HTable>
        }
        <KubectlExplainButton Field="ingress.spec.rules.http"></KubectlExplainButton>
    </HTableColumn>
}

@code {

    [Parameter]
    public IList<V1IngressRule> Rules { get; set; }

    [Parameter]
    public string Title { get; set; }

}
